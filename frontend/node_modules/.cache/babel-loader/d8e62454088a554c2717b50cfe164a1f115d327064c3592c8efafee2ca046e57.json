{"ast":null,"code":"import React,{useState,useEffect}from'react';import{adminService}from'../../services/adminService';import UserTable from'../../components/admin/UserTable';import LoadingSpinner from'../../components/common/LoadingSpinner';import ConfirmModal from'../../components/common/ConfirmModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=()=>{const[customers,setCustomers]=useState([]);const[loading,setLoading]=useState(true);const[includeBlocked,setIncludeBlocked]=useState(false);const[modalOpen,setModalOpen]=useState(false);const[modalAction,setModalAction]=useState(null);const[selectedCustomerId,setSelectedCustomerId]=useState(null);const[blockReason,setBlockReason]=useState('');useEffect(()=>{fetchCustomers();},[includeBlocked]);const fetchCustomers=async()=>{try{const response=await adminService.getAllCustomers(includeBlocked);setCustomers(response.data.customers);}catch(error){console.error('Error fetching customers:',error);}finally{setLoading(false);}};const handleBlockClick=customerId=>{setSelectedCustomerId(customerId);setModalAction('block');setModalOpen(true);};const handleUnblockClick=customerId=>{setSelectedCustomerId(customerId);setModalAction('unblock');setModalOpen(true);};const handleConfirmAction=async()=>{try{if(modalAction==='block'){await adminService.blacklistCustomer(selectedCustomerId,blockReason);alert('Customer blocked successfully');}else{await adminService.unblockCustomer(selectedCustomerId);alert('Customer unblocked successfully');}fetchCustomers();setBlockReason('');}catch(error){alert('Failed to perform action');}};if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{fullScreen:true});return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Customer Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:includeBlocked,onChange:e=>setIncludeBlocked(e.target.checked),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Include Blocked Users\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[\"Total: \",customers.length]})]})]}),customers.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-12 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No customers found\"})}):/*#__PURE__*/_jsx(UserTable,{users:customers,onBlock:handleBlockClick,onUnblock:handleUnblockClick,userType:\"customer\"}),/*#__PURE__*/_jsx(ConfirmModal,{isOpen:modalOpen,onClose:()=>{setModalOpen(false);setBlockReason('');},onConfirm:handleConfirmAction,title:modalAction==='block'?'Block Customer':'Unblock Customer',message:modalAction==='block'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-4\",children:\"Are you sure you want to block this customer?\"}),/*#__PURE__*/_jsx(\"textarea\",{value:blockReason,onChange:e=>setBlockReason(e.target.value),placeholder:\"Reason for blocking (optional)\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg\",rows:\"3\"})]}):'Are you sure you want to unblock this customer?',confirmText:modalAction==='block'?'Block':'Unblock',danger:modalAction==='block'})]})});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","adminService","UserTable","LoadingSpinner","ConfirmModal","jsx","_jsx","jsxs","_jsxs","UserManagement","customers","setCustomers","loading","setLoading","includeBlocked","setIncludeBlocked","modalOpen","setModalOpen","modalAction","setModalAction","selectedCustomerId","setSelectedCustomerId","blockReason","setBlockReason","fetchCustomers","response","getAllCustomers","data","error","console","handleBlockClick","customerId","handleUnblockClick","handleConfirmAction","blacklistCustomer","alert","unblockCustomer","fullScreen","className","children","type","checked","onChange","e","target","length","users","onBlock","onUnblock","userType","isOpen","onClose","onConfirm","title","message","value","placeholder","rows","confirmText","danger"],"sources":["C:/Users/piyus/OneDrive/Documents/Workspaces/E-commerce/frontend/src/pages/admin/UserManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { adminService } from '../../services/adminService';\r\nimport UserTable from '../../components/admin/UserTable';\r\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\r\nimport ConfirmModal from '../../components/common/ConfirmModal';\r\n\r\nconst UserManagement = () => {\r\n  const [customers, setCustomers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [includeBlocked, setIncludeBlocked] = useState(false);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [modalAction, setModalAction] = useState(null);\r\n  const [selectedCustomerId, setSelectedCustomerId] = useState(null);\r\n  const [blockReason, setBlockReason] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchCustomers();\r\n  }, [includeBlocked]);\r\n\r\n  const fetchCustomers = async () => {\r\n    try {\r\n      const response = await adminService.getAllCustomers(includeBlocked);\r\n      setCustomers(response.data.customers);\r\n    } catch (error) {\r\n      console.error('Error fetching customers:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleBlockClick = (customerId) => {\r\n    setSelectedCustomerId(customerId);\r\n    setModalAction('block');\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleUnblockClick = (customerId) => {\r\n    setSelectedCustomerId(customerId);\r\n    setModalAction('unblock');\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleConfirmAction = async () => {\r\n    try {\r\n      if (modalAction === 'block') {\r\n        await adminService.blacklistCustomer(selectedCustomerId, blockReason);\r\n        alert('Customer blocked successfully');\r\n      } else {\r\n        await adminService.unblockCustomer(selectedCustomerId);\r\n        alert('Customer unblocked successfully');\r\n      }\r\n      fetchCustomers();\r\n      setBlockReason('');\r\n    } catch (error) {\r\n      alert('Failed to perform action');\r\n    }\r\n  };\r\n\r\n  if (loading) return <LoadingSpinner fullScreen />;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4\">\r\n\r\n        <div className=\"flex justify-between items-center mb-8\">\r\n          <h1 className=\"text-3xl font-bold\">Customer Management</h1>\r\n          <div className=\"flex items-center gap-4\">\r\n            <label className=\"flex items-center cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={includeBlocked}\r\n                onChange={(e) => setIncludeBlocked(e.target.checked)}\r\n                className=\"mr-2\"\r\n              />\r\n              <span className=\"text-sm\">Include Blocked Users</span>\r\n            </label>\r\n            <span className=\"text-gray-600\">Total: {customers.length}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {customers.length === 0 ? (\r\n          <div className=\"bg-white rounded-lg shadow-md p-12 text-center\">\r\n            <p className=\"text-gray-600\">No customers found</p>\r\n          </div>\r\n        ) : (\r\n          <UserTable\r\n            users={customers}\r\n            onBlock={handleBlockClick}\r\n            onUnblock={handleUnblockClick}\r\n            userType=\"customer\"\r\n          />\r\n        )}\r\n\r\n        <ConfirmModal\r\n          isOpen={modalOpen}\r\n          onClose={() => {\r\n            setModalOpen(false);\r\n            setBlockReason('');\r\n          }}\r\n          onConfirm={handleConfirmAction}\r\n          title={modalAction === 'block' ? 'Block Customer' : 'Unblock Customer'}\r\n          message={\r\n            modalAction === 'block' ? (\r\n              <div>\r\n                <p className=\"mb-4\">Are you sure you want to block this customer?</p>\r\n                <textarea\r\n                  value={blockReason}\r\n                  onChange={(e) => setBlockReason(e.target.value)}\r\n                  placeholder=\"Reason for blocking (optional)\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\r\n                  rows=\"3\"\r\n                />\r\n              </div>\r\n            ) : (\r\n              'Are you sure you want to unblock this customer?'\r\n            )\r\n          }\r\n          confirmText={modalAction === 'block' ? 'Block' : 'Unblock'}\r\n          danger={modalAction === 'block'}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagement;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,YAAY,KAAQ,6BAA6B,CAC1D,MAAO,CAAAC,SAAS,KAAM,kCAAkC,CACxD,MAAO,CAAAC,cAAc,KAAM,wCAAwC,CACnE,MAAO,CAAAC,YAAY,KAAM,sCAAsC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhE,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACe,cAAc,CAAEC,iBAAiB,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACiB,SAAS,CAAEC,YAAY,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACmB,WAAW,CAAEC,cAAc,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACqB,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAClE,KAAM,CAACuB,WAAW,CAAEC,cAAc,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CAElDC,SAAS,CAAC,IAAM,CACdwB,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAACV,cAAc,CAAC,CAAC,CAEpB,KAAM,CAAAU,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAxB,YAAY,CAACyB,eAAe,CAACZ,cAAc,CAAC,CACnEH,YAAY,CAACc,QAAQ,CAACE,IAAI,CAACjB,SAAS,CAAC,CACvC,CAAE,MAAOkB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CAAC,OAAS,CACRf,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAiB,gBAAgB,CAAIC,UAAU,EAAK,CACvCV,qBAAqB,CAACU,UAAU,CAAC,CACjCZ,cAAc,CAAC,OAAO,CAAC,CACvBF,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED,KAAM,CAAAe,kBAAkB,CAAID,UAAU,EAAK,CACzCV,qBAAqB,CAACU,UAAU,CAAC,CACjCZ,cAAc,CAAC,SAAS,CAAC,CACzBF,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED,KAAM,CAAAgB,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CACF,GAAIf,WAAW,GAAK,OAAO,CAAE,CAC3B,KAAM,CAAAjB,YAAY,CAACiC,iBAAiB,CAACd,kBAAkB,CAAEE,WAAW,CAAC,CACrEa,KAAK,CAAC,+BAA+B,CAAC,CACxC,CAAC,IAAM,CACL,KAAM,CAAAlC,YAAY,CAACmC,eAAe,CAAChB,kBAAkB,CAAC,CACtDe,KAAK,CAAC,iCAAiC,CAAC,CAC1C,CACAX,cAAc,CAAC,CAAC,CAChBD,cAAc,CAAC,EAAE,CAAC,CACpB,CAAE,MAAOK,KAAK,CAAE,CACdO,KAAK,CAAC,0BAA0B,CAAC,CACnC,CACF,CAAC,CAED,GAAIvB,OAAO,CAAE,mBAAON,IAAA,CAACH,cAAc,EAACkC,UAAU,MAAE,CAAC,CAEjD,mBACE/B,IAAA,QAAKgC,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3C/B,KAAA,QAAK8B,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eAErC/B,KAAA,QAAK8B,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDjC,IAAA,OAAIgC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,cAC3D/B,KAAA,QAAK8B,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtC/B,KAAA,UAAO8B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eACjDjC,IAAA,UACEkC,IAAI,CAAC,UAAU,CACfC,OAAO,CAAE3B,cAAe,CACxB4B,QAAQ,CAAGC,CAAC,EAAK5B,iBAAiB,CAAC4B,CAAC,CAACC,MAAM,CAACH,OAAO,CAAE,CACrDH,SAAS,CAAC,MAAM,CACjB,CAAC,cACFhC,IAAA,SAAMgC,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,uBAAqB,CAAM,CAAC,EACjD,CAAC,cACR/B,KAAA,SAAM8B,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,SAAO,CAAC7B,SAAS,CAACmC,MAAM,EAAO,CAAC,EAC7D,CAAC,EACH,CAAC,CAELnC,SAAS,CAACmC,MAAM,GAAK,CAAC,cACrBvC,IAAA,QAAKgC,SAAS,CAAC,gDAAgD,CAAAC,QAAA,cAC7DjC,IAAA,MAAGgC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,oBAAkB,CAAG,CAAC,CAChD,CAAC,cAENjC,IAAA,CAACJ,SAAS,EACR4C,KAAK,CAAEpC,SAAU,CACjBqC,OAAO,CAAEjB,gBAAiB,CAC1BkB,SAAS,CAAEhB,kBAAmB,CAC9BiB,QAAQ,CAAC,UAAU,CACpB,CACF,cAED3C,IAAA,CAACF,YAAY,EACX8C,MAAM,CAAElC,SAAU,CAClBmC,OAAO,CAAEA,CAAA,GAAM,CACblC,YAAY,CAAC,KAAK,CAAC,CACnBM,cAAc,CAAC,EAAE,CAAC,CACpB,CAAE,CACF6B,SAAS,CAAEnB,mBAAoB,CAC/BoB,KAAK,CAAEnC,WAAW,GAAK,OAAO,CAAG,gBAAgB,CAAG,kBAAmB,CACvEoC,OAAO,CACLpC,WAAW,GAAK,OAAO,cACrBV,KAAA,QAAA+B,QAAA,eACEjC,IAAA,MAAGgC,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,+CAA6C,CAAG,CAAC,cACrEjC,IAAA,aACEiD,KAAK,CAAEjC,WAAY,CACnBoB,QAAQ,CAAGC,CAAC,EAAKpB,cAAc,CAACoB,CAAC,CAACC,MAAM,CAACW,KAAK,CAAE,CAChDC,WAAW,CAAC,gCAAgC,CAC5ClB,SAAS,CAAC,oDAAoD,CAC9DmB,IAAI,CAAC,GAAG,CACT,CAAC,EACC,CAAC,CAEN,iDAEH,CACDC,WAAW,CAAExC,WAAW,GAAK,OAAO,CAAG,OAAO,CAAG,SAAU,CAC3DyC,MAAM,CAAEzC,WAAW,GAAK,OAAQ,CACjC,CAAC,EACC,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAT,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}