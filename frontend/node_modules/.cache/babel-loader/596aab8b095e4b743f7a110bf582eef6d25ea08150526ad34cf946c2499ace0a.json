{"ast":null,"code":"import _objectSpread from\"C:/Users/piyus/OneDrive/Documents/Workspaces/E-commerce/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{productService}from'../../services/productService';import ProductTable from'../../components/admin/ProductTable';import LoadingSpinner from'../../components/common/LoadingSpinner';import ConfirmModal from'../../components/common/ConfirmModal';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductManagement=()=>{const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[deleteModalOpen,setDeleteModalOpen]=useState(false);const[selectedProductId,setSelectedProductId]=useState(null);const[filters,setFilters]=useState({page:1,limit:20});const[pagination,setPagination]=useState({currentPage:1,totalPages:1,total:0});useEffect(()=>{fetchProducts();},[filters]);const fetchProducts=async()=>{setLoading(true);try{const response=await productService.getAllProducts(filters);setProducts(response.data.products);setPagination({currentPage:response.data.currentPage,totalPages:response.data.totalPages,total:response.data.total});}catch(error){console.error('Error fetching products:',error);}finally{setLoading(false);}};const handleDeleteClick=productId=>{setSelectedProductId(productId);setDeleteModalOpen(true);};const handleConfirmDelete=async()=>{try{await productService.deleteProduct(selectedProductId);alert('Product deleted successfully');fetchProducts();}catch(error){alert('Failed to delete product');}};const handlePageChange=page=>{setFilters(_objectSpread(_objectSpread({},filters),{},{page}));};if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{fullScreen:true});return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Product Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-600\",children:[\"Total: \",pagination.total,\" products\"]})]}),products.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-12 text-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-24 h-24 mx-auto mb-4 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-2\",children:\"No products found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Products will appear here once sellers add them\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ProductTable,{products:products,onDelete:handleDeleteClick}),pagination.totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-2 mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(pagination.currentPage-1),disabled:pagination.currentPage===1,className:\"px-4 py-2 rounded bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Previous\"}),[...Array(pagination.totalPages)].map((_,index)=>{const page=index+1;// Show first page, last page, current page, and pages around current\nif(page===1||page===pagination.totalPages||page>=pagination.currentPage-1&&page<=pagination.currentPage+1){return/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page),className:\"px-4 py-2 rounded \".concat(pagination.currentPage===page?'bg-blue-600 text-white':'bg-white text-gray-700 hover:bg-gray-100'),children:page},page);}else if(page===pagination.currentPage-2||page===pagination.currentPage+2){return/*#__PURE__*/_jsx(\"span\",{className:\"px-2\",children:\"...\"},page);}return null;}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(pagination.currentPage+1),disabled:pagination.currentPage===pagination.totalPages,className:\"px-4 py-2 rounded bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Next\"})]})]}),/*#__PURE__*/_jsx(ConfirmModal,{isOpen:deleteModalOpen,onClose:()=>setDeleteModalOpen(false),onConfirm:handleConfirmDelete,title:\"Delete Product\",message:\"Are you sure you want to delete this product? This action cannot be undone.\",confirmText:\"Delete\",danger:true})]})});};export default ProductManagement;","map":{"version":3,"names":["React","useState","useEffect","productService","ProductTable","LoadingSpinner","ConfirmModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductManagement","products","setProducts","loading","setLoading","deleteModalOpen","setDeleteModalOpen","selectedProductId","setSelectedProductId","filters","setFilters","page","limit","pagination","setPagination","currentPage","totalPages","total","fetchProducts","response","getAllProducts","data","error","console","handleDeleteClick","productId","handleConfirmDelete","deleteProduct","alert","handlePageChange","_objectSpread","fullScreen","className","children","length","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onDelete","onClick","disabled","Array","map","_","index","concat","isOpen","onClose","onConfirm","title","message","confirmText","danger"],"sources":["C:/Users/piyus/OneDrive/Documents/Workspaces/E-commerce/frontend/src/pages/admin/ProductManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { productService } from '../../services/productService';\r\nimport ProductTable from '../../components/admin/ProductTable';\r\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\r\nimport ConfirmModal from '../../components/common/ConfirmModal';\r\n\r\nconst ProductManagement = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [deleteModalOpen, setDeleteModalOpen] = useState(false);\r\n  const [selectedProductId, setSelectedProductId] = useState(null);\r\n  const [filters, setFilters] = useState({\r\n    page: 1,\r\n    limit: 20\r\n  });\r\n  const [pagination, setPagination] = useState({\r\n    currentPage: 1,\r\n    totalPages: 1,\r\n    total: 0\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, [filters]);\r\n\r\n  const fetchProducts = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await productService.getAllProducts(filters);\r\n      setProducts(response.data.products);\r\n      setPagination({\r\n        currentPage: response.data.currentPage,\r\n        totalPages: response.data.totalPages,\r\n        total: response.data.total\r\n      });\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteClick = (productId) => {\r\n    setSelectedProductId(productId);\r\n    setDeleteModalOpen(true);\r\n  };\r\n\r\n  const handleConfirmDelete = async () => {\r\n    try {\r\n      await productService.deleteProduct(selectedProductId);\r\n      alert('Product deleted successfully');\r\n      fetchProducts();\r\n    } catch (error) {\r\n      alert('Failed to delete product');\r\n    }\r\n  };\r\n\r\n  const handlePageChange = (page) => {\r\n    setFilters({ ...filters, page });\r\n  };\r\n\r\n  if (loading) return <LoadingSpinner fullScreen />;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4\">\r\n        <div className=\"flex justify-between items-center mb-8\">\r\n          <h1 className=\"text-3xl font-bold\">Product Management</h1>\r\n          <div className=\"text-gray-600\">\r\n            Total: {pagination.total} products\r\n          </div>\r\n        </div>\r\n\r\n        {products.length === 0 ? (\r\n          <div className=\"bg-white rounded-lg shadow-md p-12 text-center\">\r\n            <svg className=\"w-24 h-24 mx-auto mb-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\r\n            </svg>\r\n            <h2 className=\"text-2xl font-semibold mb-2\">No products found</h2>\r\n            <p className=\"text-gray-600\">Products will appear here once sellers add them</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <ProductTable products={products} onDelete={handleDeleteClick} />\r\n\r\n            {/* Pagination */}\r\n            {pagination.totalPages > 1 && (\r\n              <div className=\"flex justify-center gap-2 mt-8\">\r\n                <button\r\n                  onClick={() => handlePageChange(pagination.currentPage - 1)}\r\n                  disabled={pagination.currentPage === 1}\r\n                  className=\"px-4 py-2 rounded bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  Previous\r\n                </button>\r\n                \r\n                {[...Array(pagination.totalPages)].map((_, index) => {\r\n                  const page = index + 1;\r\n                  // Show first page, last page, current page, and pages around current\r\n                  if (\r\n                    page === 1 ||\r\n                    page === pagination.totalPages ||\r\n                    (page >= pagination.currentPage - 1 && page <= pagination.currentPage + 1)\r\n                  ) {\r\n                    return (\r\n                      <button\r\n                        key={page}\r\n                        onClick={() => handlePageChange(page)}\r\n                        className={`px-4 py-2 rounded ${\r\n                          pagination.currentPage === page\r\n                            ? 'bg-blue-600 text-white'\r\n                            : 'bg-white text-gray-700 hover:bg-gray-100'\r\n                        }`}\r\n                      >\r\n                        {page}\r\n                      </button>\r\n                    );\r\n                  } else if (\r\n                    page === pagination.currentPage - 2 ||\r\n                    page === pagination.currentPage + 2\r\n                  ) {\r\n                    return <span key={page} className=\"px-2\">...</span>;\r\n                  }\r\n                  return null;\r\n                })}\r\n\r\n                <button\r\n                  onClick={() => handlePageChange(pagination.currentPage + 1)}\r\n                  disabled={pagination.currentPage === pagination.totalPages}\r\n                  className=\"px-4 py-2 rounded bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  Next\r\n                </button>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        <ConfirmModal\r\n          isOpen={deleteModalOpen}\r\n          onClose={() => setDeleteModalOpen(false)}\r\n          onConfirm={handleConfirmDelete}\r\n          title=\"Delete Product\"\r\n          message=\"Are you sure you want to delete this product? This action cannot be undone.\"\r\n          confirmText=\"Delete\"\r\n          danger={true}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}