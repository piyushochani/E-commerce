{"ast":null,"code":"import _objectSpread from\"C:/Users/piyus/OneDrive/Documents/Workspaces/E-commerce/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useSearchParams}from'react-router-dom';import{productService}from'../../services/productService';import ProductCard from'../../components/customer/ProductCard';import FilterSidebar from'../../components/customer/FilterSidebar';import LoadingSpinner from'../../components/common/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductListing=()=>{const[searchParams,setSearchParams]=useSearchParams();const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[filters,setFilters]=useState({});const[pagination,setPagination]=useState({currentPage:1,totalPages:1,total:0});useEffect(()=>{const category=searchParams.get('category');if(category){setFilters({product_type:category});}},[searchParams]);useEffect(()=>{fetchProducts();},[filters]);const fetchProducts=async()=>{setLoading(true);try{const response=await productService.getAllProducts(_objectSpread(_objectSpread({},filters),{},{limit:12}));setProducts(response.data.products);setPagination({currentPage:response.data.currentPage,totalPages:response.data.totalPages,total:response.data.total});}catch(error){console.error('Error fetching products:',error);}finally{setLoading(false);}};const handleFilterChange=newFilters=>{setFilters(newFilters);};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-8\",children:\"All Products\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-64 flex-shrink-0\",children:/*#__PURE__*/_jsx(FilterSidebar,{filters:filters,onFilterChange:handleFilterChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:loading?/*#__PURE__*/_jsx(LoadingSpinner,{}):products.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:\"No products found\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 text-gray-600\",children:[\"Showing \",products.length,\" of \",pagination.total,\" products\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:products.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product},product._id))}),pagination.totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center gap-2 mt-8\",children:[...Array(pagination.totalPages)].map((_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilters(_objectSpread(_objectSpread({},filters),{},{page:index+1})),className:\"px-4 py-2 rounded \".concat(pagination.currentPage===index+1?'bg-blue-600 text-white':'bg-white text-gray-700 hover:bg-gray-100'),children:index+1},index))})]})})]})]})});};export default ProductListing;","map":{"version":3,"names":["React","useState","useEffect","useSearchParams","productService","ProductCard","FilterSidebar","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductListing","searchParams","setSearchParams","products","setProducts","loading","setLoading","filters","setFilters","pagination","setPagination","currentPage","totalPages","total","category","get","product_type","fetchProducts","response","getAllProducts","_objectSpread","limit","data","error","console","handleFilterChange","newFilters","className","children","onFilterChange","length","map","product","_id","Array","_","index","onClick","page","concat"],"sources":["C:/Users/piyus/OneDrive/Documents/Workspaces/E-commerce/frontend/src/pages/customer/ProductListing.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { productService } from '../../services/productService';\r\nimport ProductCard from '../../components/customer/ProductCard';\r\nimport FilterSidebar from '../../components/customer/FilterSidebar';\r\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\r\n\r\nconst ProductListing = () => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filters, setFilters] = useState({});\r\n  const [pagination, setPagination] = useState({\r\n    currentPage: 1,\r\n    totalPages: 1,\r\n    total: 0\r\n  });\r\n\r\n  useEffect(() => {\r\n    const category = searchParams.get('category');\r\n    if (category) {\r\n      setFilters({ product_type: category });\r\n    }\r\n  }, [searchParams]);\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, [filters]);\r\n\r\n  const fetchProducts = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await productService.getAllProducts({ ...filters, limit: 12 });\r\n      setProducts(response.data.products);\r\n      setPagination({\r\n        currentPage: response.data.currentPage,\r\n        totalPages: response.data.totalPages,\r\n        total: response.data.total\r\n      });\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFilterChange = (newFilters) => {\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4\">\r\n        <h1 className=\"text-3xl font-bold mb-8\">All Products</h1>\r\n\r\n        <div className=\"flex gap-8\">\r\n          {/* Filters Sidebar */}\r\n          <div className=\"w-64 flex-shrink-0\">\r\n            <FilterSidebar filters={filters} onFilterChange={handleFilterChange} />\r\n          </div>\r\n\r\n          {/* Products Grid */}\r\n          <div className=\"flex-1\">\r\n            {loading ? (\r\n              <LoadingSpinner />\r\n            ) : products.length === 0 ? (\r\n              <div className=\"text-center py-12\">\r\n                <p className=\"text-gray-600 text-lg\">No products found</p>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <div className=\"mb-4 text-gray-600\">\r\n                  Showing {products.length} of {pagination.total} products\r\n                </div>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {products.map((product) => (\r\n                    <ProductCard key={product._id} product={product} />\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Pagination */}\r\n                {pagination.totalPages > 1 && (\r\n                  <div className=\"flex justify-center gap-2 mt-8\">\r\n                    {[...Array(pagination.totalPages)].map((_, index) => (\r\n                      <button\r\n                        key={index}\r\n                        onClick={() => setFilters({ ...filters, page: index + 1 })}\r\n                        className={`px-4 py-2 rounded ${\r\n                          pagination.currentPage === index + 1\r\n                            ? 'bg-blue-600 text-white'\r\n                            : 'bg-white text-gray-700 hover:bg-gray-100'\r\n                        }`}\r\n                      >\r\n                        {index + 1}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductListing;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}